(()=>{var To=Object.create;var it=Object.defineProperty;var Oo=Object.getOwnPropertyDescriptor;var Po=Object.getOwnPropertyNames;var Io=Object.getPrototypeOf,Ro=Object.prototype.hasOwnProperty;var jo=(s,e)=>()=>(s&&(e=s(s=0)),e);var p=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Co=(s,e)=>{for(var t in e)it(s,t,{get:e[t],enumerable:!0})},Gr=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Po(e))!Ro.call(s,n)&&n!==t&&it(s,n,{get:()=>e[n],enumerable:!(r=Oo(e,n))||r.enumerable});return s};var Bt=(s,e,t)=>(t=s!=null?To(Io(s)):{},Gr(e||!s||!s.__esModule?it(t,"default",{value:s,enumerable:!0}):t,s)),$o=s=>Gr(it({},"__esModule",{value:!0}),s);var h=(s,e,t)=>new Promise((r,n)=>{var i=l=>{try{a(t.next(l))}catch(u){n(u)}},o=l=>{try{a(t.throw(l))}catch(u){n(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,o);a((t=t.apply(s,e)).next())});var Gt=p((yc,Kr)=>{"use strict";var Wr=Object.prototype.toString;Kr.exports=function(e){var t=Wr.call(e),r=t==="[object Arguments]";return r||(r=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Wr.call(e.callee)==="[object Function]"),r}});var ns=p((mc,ss)=>{"use strict";var rs;Object.keys||(Pe=Object.prototype.hasOwnProperty,Ht=Object.prototype.toString,Yr=Gt(),Jt=Object.prototype.propertyIsEnumerable,Qr=!Jt.call({toString:null},"toString"),Xr=Jt.call(function(){},"prototype"),Ie=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ot=function(s){var e=s.constructor;return e&&e.prototype===s},Zr={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},es=function(){if(typeof window=="undefined")return!1;for(var s in window)try{if(!Zr["$"+s]&&Pe.call(window,s)&&window[s]!==null&&typeof window[s]=="object")try{ot(window[s])}catch(e){return!0}}catch(e){return!0}return!1}(),ts=function(s){if(typeof window=="undefined"||!es)return ot(s);try{return ot(s)}catch(e){return!1}},rs=function(e){var t=e!==null&&typeof e=="object",r=Ht.call(e)==="[object Function]",n=Yr(e),i=t&&Ht.call(e)==="[object String]",o=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=Xr&&r;if(i&&e.length>0&&!Pe.call(e,0))for(var l=0;l<e.length;++l)o.push(String(l));if(n&&e.length>0)for(var u=0;u<e.length;++u)o.push(String(u));else for(var c in e)!(a&&c==="prototype")&&Pe.call(e,c)&&o.push(String(c));if(Qr)for(var d=ts(e),f=0;f<Ie.length;++f)!(d&&Ie[f]==="constructor")&&Pe.call(e,Ie[f])&&o.push(Ie[f]);return o});var Pe,Ht,Yr,Jt,Qr,Xr,Ie,ot,Zr,es,ts;ss.exports=rs});var ls=p((vc,as)=>{"use strict";var Lo=Array.prototype.slice,Do=Gt(),is=Object.keys,at=is?function(e){return is(e)}:ns(),os=Object.keys;at.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(r){return Do(r)?os(Lo.call(r)):os(r)})}else Object.keys=at;return Object.keys||at};as.exports=at});var Re=p((_c,cs)=>{"use strict";var lt=Object.defineProperty||!1;if(lt)try{lt({},"a",{value:1})}catch(s){lt=!1}cs.exports=lt});var Vt=p((wc,us)=>{"use strict";us.exports=SyntaxError});var he=p((bc,hs)=>{"use strict";hs.exports=TypeError});var fs=p((Sc,ds)=>{"use strict";ds.exports=Object.getOwnPropertyDescriptor});var je=p((xc,ps)=>{"use strict";var ct=fs();if(ct)try{ct([],"length")}catch(s){ct=null}ps.exports=ct});var Wt=p((Ec,ms)=>{"use strict";var gs=Re(),Uo=Vt(),de=he(),ys=je();ms.exports=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new de("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new de("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new de("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new de("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new de("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new de("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!ys&&ys(e,t);if(gs)gs(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:r,writable:i===null&&l?l.writable:!i});else if(a||!n&&!i&&!o)e[t]=r;else throw new Uo("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Yt=p((kc,_s)=>{"use strict";var Kt=Re(),vs=function(){return!!Kt};vs.hasArrayLengthDefineBug=function(){if(!Kt)return null;try{return Kt([],"length",{value:1}).length!==1}catch(e){return!0}};_s.exports=vs});var Qt=p((Ac,xs)=>{"use strict";var No=ls(),qo=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Fo=Object.prototype.toString,Mo=Array.prototype.concat,ws=Wt(),Bo=function(s){return typeof s=="function"&&Fo.call(s)==="[object Function]"},bs=Yt()(),zo=function(s,e,t,r){if(e in s){if(r===!0){if(s[e]===t)return}else if(!Bo(r)||!r())return}bs?ws(s,e,t,!0):ws(s,e,t)},Ss=function(s,e){var t=arguments.length>2?arguments[2]:{},r=No(e);qo&&(r=Mo.call(r,Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n+=1)zo(s,r[n],e[r[n]],t[r[n]])};Ss.supportsDescriptors=!!bs;xs.exports=Ss});var Xt=p((Tc,Es)=>{"use strict";Es.exports=Object});var As=p((Oc,ks)=>{"use strict";ks.exports=Error});var Os=p((Pc,Ts)=>{"use strict";Ts.exports=EvalError});var Is=p((Ic,Ps)=>{"use strict";Ps.exports=RangeError});var js=p((Rc,Rs)=>{"use strict";Rs.exports=ReferenceError});var $s=p((jc,Cs)=>{"use strict";Cs.exports=URIError});var Ds=p((Cc,Ls)=>{"use strict";Ls.exports=Math.abs});var Ns=p(($c,Us)=>{"use strict";Us.exports=Math.floor});var Fs=p((Lc,qs)=>{"use strict";qs.exports=Math.max});var Bs=p((Dc,Ms)=>{"use strict";Ms.exports=Math.min});var Gs=p((Uc,zs)=>{"use strict";zs.exports=Math.pow});var Js=p((Nc,Hs)=>{"use strict";Hs.exports=Math.round});var Ws=p((qc,Vs)=>{"use strict";Vs.exports=Number.isNaN||function(e){return e!==e}});var Ys=p((Fc,Ks)=>{"use strict";var Go=Ws();Ks.exports=function(e){return Go(e)||e===0?e:e<0?-1:1}});var Xs=p((Mc,Qs)=>{"use strict";Qs.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;e[t]=n;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==n||a.enumerable!==!0)return!1}return!0}});var tn=p((Bc,en)=>{"use strict";var Zs=typeof Symbol!="undefined"&&Symbol,Ho=Xs();en.exports=function(){return typeof Zs!="function"||typeof Symbol!="function"||typeof Zs("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ho()}});var Zt=p((zc,rn)=>{"use strict";rn.exports=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null});var er=p((Gc,sn)=>{"use strict";var Jo=Xt();sn.exports=Jo.getPrototypeOf||null});var an=p((Hc,on)=>{"use strict";var Vo="Function.prototype.bind called on incompatible ",Wo=Object.prototype.toString,Ko=Math.max,Yo="[object Function]",nn=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},Qo=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},Xo=function(s,e){for(var t="",r=0;r<s.length;r+=1)t+=s[r],r+1<s.length&&(t+=e);return t};on.exports=function(e){var t=this;if(typeof t!="function"||Wo.apply(t)!==Yo)throw new TypeError(Vo+t);for(var r=Qo(arguments,1),n,i=function(){if(this instanceof n){var c=t.apply(this,nn(r,arguments));return Object(c)===c?c:this}return t.apply(e,nn(r,arguments))},o=Ko(0,t.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(n=Function("binder","return function ("+Xo(a,",")+"){ return binder.apply(this,arguments); }")(i),t.prototype){var u=function(){};u.prototype=t.prototype,n.prototype=new u,u.prototype=null}return n}});var fe=p((Jc,ln)=>{"use strict";var Zo=an();ln.exports=Function.prototype.bind||Zo});var ut=p((Vc,cn)=>{"use strict";cn.exports=Function.prototype.call});var ht=p((Wc,un)=>{"use strict";un.exports=Function.prototype.apply});var dn=p((Kc,hn)=>{"use strict";hn.exports=typeof Reflect!="undefined"&&Reflect&&Reflect.apply});var tr=p((Yc,fn)=>{"use strict";var ea=fe(),ta=ht(),ra=ut(),sa=dn();fn.exports=sa||ea.call(ra,ta)});var rr=p((Qc,pn)=>{"use strict";var na=fe(),ia=he(),oa=ut(),aa=tr();pn.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new ia("a function is required");return aa(na,oa,e)}});var wn=p((Xc,_n)=>{"use strict";var la=rr(),gn=je(),mn;try{mn=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var sr=!!mn&&gn&&gn(Object.prototype,"__proto__"),vn=Object,yn=vn.getPrototypeOf;_n.exports=sr&&typeof sr.get=="function"?la([sr.get]):typeof yn=="function"?function(e){return yn(e==null?e:vn(e))}:!1});var kn=p((Zc,En)=>{"use strict";var bn=Zt(),Sn=er(),xn=wn();En.exports=bn?function(e){return bn(e)}:Sn?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Sn(e)}:xn?function(e){return xn(e)}:null});var nr=p((eu,An)=>{"use strict";var ca=Function.prototype.call,ua=Object.prototype.hasOwnProperty,ha=fe();An.exports=ha.call(ca,ua)});var ar=p((tu,jn)=>{"use strict";var m,da=Xt(),fa=As(),pa=Os(),ga=Is(),ya=js(),me=Vt(),ye=he(),ma=$s(),va=Ds(),_a=Ns(),wa=Fs(),ba=Bs(),Sa=Gs(),xa=Js(),Ea=Ys(),In=Function,ir=function(s){try{return In('"use strict"; return ('+s+").constructor;")()}catch(e){}},Ce=je(),ka=Re(),or=function(){throw new ye},Aa=Ce?function(){try{return arguments.callee,or}catch(s){try{return Ce(arguments,"callee").get}catch(e){return or}}}():or,pe=tn()(),E=kn(),Ta=er(),Oa=Zt(),Rn=ht(),$e=ut(),ge={},Pa=typeof Uint8Array=="undefined"||!E?m:E(Uint8Array),H={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?m:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?m:ArrayBuffer,"%ArrayIteratorPrototype%":pe&&E?E([][Symbol.iterator]()):m,"%AsyncFromSyncIteratorPrototype%":m,"%AsyncFunction%":ge,"%AsyncGenerator%":ge,"%AsyncGeneratorFunction%":ge,"%AsyncIteratorPrototype%":ge,"%Atomics%":typeof Atomics=="undefined"?m:Atomics,"%BigInt%":typeof BigInt=="undefined"?m:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?m:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?m:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?m:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":fa,"%eval%":eval,"%EvalError%":pa,"%Float16Array%":typeof Float16Array=="undefined"?m:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?m:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?m:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?m:FinalizationRegistry,"%Function%":In,"%GeneratorFunction%":ge,"%Int8Array%":typeof Int8Array=="undefined"?m:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?m:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?m:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pe&&E?E(E([][Symbol.iterator]())):m,"%JSON%":typeof JSON=="object"?JSON:m,"%Map%":typeof Map=="undefined"?m:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!pe||!E?m:E(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":da,"%Object.getOwnPropertyDescriptor%":Ce,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?m:Promise,"%Proxy%":typeof Proxy=="undefined"?m:Proxy,"%RangeError%":ga,"%ReferenceError%":ya,"%Reflect%":typeof Reflect=="undefined"?m:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?m:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!pe||!E?m:E(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?m:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pe&&E?E(""[Symbol.iterator]()):m,"%Symbol%":pe?Symbol:m,"%SyntaxError%":me,"%ThrowTypeError%":Aa,"%TypedArray%":Pa,"%TypeError%":ye,"%Uint8Array%":typeof Uint8Array=="undefined"?m:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?m:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?m:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?m:Uint32Array,"%URIError%":ma,"%WeakMap%":typeof WeakMap=="undefined"?m:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?m:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?m:WeakSet,"%Function.prototype.call%":$e,"%Function.prototype.apply%":Rn,"%Object.defineProperty%":ka,"%Object.getPrototypeOf%":Ta,"%Math.abs%":va,"%Math.floor%":_a,"%Math.max%":wa,"%Math.min%":ba,"%Math.pow%":Sa,"%Math.round%":xa,"%Math.sign%":Ea,"%Reflect.getPrototypeOf%":Oa};if(E)try{null.error}catch(s){Tn=E(E(s)),H["%Error.prototype%"]=Tn}var Tn,Ia=function s(e){var t;if(e==="%AsyncFunction%")t=ir("async function () {}");else if(e==="%GeneratorFunction%")t=ir("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=ir("async function* () {}");else if(e==="%AsyncGenerator%"){var r=s("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=s("%AsyncGenerator%");n&&E&&(t=E(n.prototype))}return H[e]=t,t},On={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Le=fe(),dt=nr(),Ra=Le.call($e,Array.prototype.concat),ja=Le.call(Rn,Array.prototype.splice),Pn=Le.call($e,String.prototype.replace),ft=Le.call($e,String.prototype.slice),Ca=Le.call($e,RegExp.prototype.exec),$a=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,La=/\\(\\)?/g,Da=function(e){var t=ft(e,0,1),r=ft(e,-1);if(t==="%"&&r!=="%")throw new me("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new me("invalid intrinsic syntax, expected opening `%`");var n=[];return Pn(e,$a,function(i,o,a,l){n[n.length]=a?Pn(l,La,"$1"):o||i}),n},Ua=function(e,t){var r=e,n;if(dt(On,r)&&(n=On[r],r="%"+n[0]+"%"),dt(H,r)){var i=H[r];if(i===ge&&(i=Ia(r)),typeof i=="undefined"&&!t)throw new ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new me("intrinsic "+e+" does not exist!")};jn.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ye('"allowMissing" argument must be a boolean');if(Ca(/^%?[^%]*%?$/,e)===null)throw new me("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Da(e),n=r.length>0?r[0]:"",i=Ua("%"+n+"%",t),o=i.name,a=i.value,l=!1,u=i.alias;u&&(n=u[0],ja(r,Ra([0,1],u)));for(var c=1,d=!0;c<r.length;c+=1){var f=r[c],g=ft(f,0,1),_=ft(f,-1);if((g==='"'||g==="'"||g==="`"||_==='"'||_==="'"||_==="`")&&g!==_)throw new me("property names with quotes must have matching quotes");if((f==="constructor"||!d)&&(l=!0),n+="."+f,o="%"+n+"%",dt(H,o))a=H[o];else if(a!=null){if(!(f in a)){if(!t)throw new ye("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ce&&c+1>=r.length){var b=Ce(a,f);d=!!b,d&&"get"in b&&!("originalValue"in b.get)?a=b.get:a=a[f]}else d=dt(a,f),a=a[f];d&&!l&&(H[o]=a)}}return a}});var Un=p((ru,Dn)=>{"use strict";var Na=ar(),Cn=Wt(),qa=Yt()(),$n=je(),Ln=he(),Fa=Na("%Math.floor%");Dn.exports=function(e,t){if(typeof e!="function")throw new Ln("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||Fa(t)!==t)throw new Ln("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,i=!0;if("length"in e&&$n){var o=$n(e,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(i=!1)}return(n||i||!r)&&(qa?Cn(e,"length",t,!0,!0):Cn(e,"length",t)),e}});var qn=p((su,Nn)=>{"use strict";var Ma=fe(),Ba=ht(),za=tr();Nn.exports=function(){return za(Ma,Ba,arguments)}});var lr=p((nu,pt)=>{"use strict";var Ga=Un(),Fn=Re(),Ha=rr(),Mn=qn();pt.exports=function(e){var t=Ha(arguments),r=e.length-(arguments.length-1);return Ga(t,1+(r>0?r:0),!0)};Fn?Fn(pt.exports,"apply",{value:Mn}):pt.exports.apply=Mn});var zn=p((iu,Bn)=>{"use strict";var Ja=he();Bn.exports=function(e){if(e==null)throw new Ja(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var Vn=p((ou,Jn)=>{"use strict";var Gn=ar(),Hn=lr(),Va=Hn(Gn("String.prototype.indexOf"));Jn.exports=function(e,t){var r=Gn(e,!!t);return typeof r=="function"&&Va(e,".prototype.")>-1?Hn(r):r}});var cr=p((au,Kn)=>{"use strict";var Wa=zn(),Wn=Vn(),Ka=Wn("Object.prototype.propertyIsEnumerable"),Ya=Wn("Array.prototype.push");Kn.exports=function(e){var t=Wa(e),r=[];for(var n in t)Ka(t,n)&&Ya(r,[n,t[n]]);return r}});var ur=p((lu,Yn)=>{"use strict";var Qa=cr();Yn.exports=function(){return typeof Object.entries=="function"?Object.entries:Qa}});var Xn=p((cu,Qn)=>{"use strict";var Xa=ur(),Za=Qt();Qn.exports=function(){var e=Xa();return Za(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}});var ri=p((uu,ti)=>{"use strict";var el=Qt(),tl=lr(),rl=cr(),Zn=ur(),sl=Xn(),ei=tl(Zn(),Object);el(ei,{getPolyfill:Zn,implementation:rl,shim:sl});ti.exports=ei});var oi=p((hu,ii)=>{"use strict";var nl=!1,ni=function(){};nl&&(si=function(e,t){var r=arguments.length;t=new Array(r>1?r-1:0);for(var n=1;n<r;n++)t[n-1]=arguments[n];var i=0,o="Warning: "+e.replace(/%s/g,function(){return t[i++]});typeof console!="undefined"&&console.error(o);try{throw new Error(o)}catch(a){}},ni=function(s,e,t){var r=arguments.length;t=new Array(r>2?r-2:0);for(var n=2;n<r;n++)t[n-2]=arguments[n];if(e===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");s||si.apply(null,[e].concat(t))});var si;ii.exports=ni});var di=p((du,hi)=>{"use strict";var dr=ri(),il=oi(),li=nr(),ol=function(e){il(!1,e)},hr=String.prototype.replace,ci=String.prototype.split,yt="||||",gt=function(s){var e=s%100,t=e%10;return e!==11&&t===1?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},ui={pluralTypes:{arabic:function(s){if(s<3)return s;var e=s%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:gt,chinese:function(){return 0},croatian:gt,french:function(s){return s>=2?1:0},german:function(s){return s!==1?1:0},russian:gt,lithuanian:function(s){return s%10===1&&s%100!==11?0:s%10>=2&&s%10<=9&&(s%100<11||s%100>19)?1:2},czech:function(s){return s===1?0:s>=2&&s<=4?1:2},polish:function(s){if(s===1)return 0;var e=s%10;return 2<=e&&e<=4&&(s%100<10||s%100>=20)?1:2},icelandic:function(s){return s%10!==1||s%100===11?1:0},slovenian:function(s){var e=s%100;return e===1?0:e===2?1:e===3||e===4?2:3},romanian:function(s){if(s===1)return 0;var e=s%100;return s===0||e>=2&&e<=19?1:2},ukrainian:gt},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function al(s){for(var e={},t=dr(s),r=0;r<t.length;r+=1)for(var n=t[r][0],i=t[r][1],o=0;o<i.length;o+=1)e[i[o]]=n;return e}function ll(s,e){var t=al(s.pluralTypeToLanguages);return t[e]||t[ci.call(e,/-/,1)[0]]||t.en}function cl(s,e,t){return s.pluralTypes[e](t)}function ul(){var s={};return function(e,t){var r=s[t];return r&&!e.pluralTypes[r]&&(r=null,s[t]=r),r||(r=ll(e,t),r&&(s[t]=r)),r}}function ai(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hl(s){var e=s&&s.prefix||"%{",t=s&&s.suffix||"}";if(e===yt||t===yt)throw new RangeError('"'+yt+'" token is reserved for pluralization');return new RegExp(ai(e)+"(.*?)"+ai(t),"g")}var dl=ul(),fl=/%\{(.*?)\}/g;function fr(s,e,t,r,n,i){if(typeof s!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(e==null)return s;var o=s,a=r||fl,l=i||hr,u=typeof e=="number"?{smart_count:e}:e;if(u.smart_count!=null&&s){var c=n||ui,d=ci.call(s,yt),f=t||"en",g=dl(c,f),_=cl(c,g,u.smart_count);o=hr.call(d[_]||d[0],/^[^\S]*|[^\S]*$/g,"")}return o=l.call(o,a,function(b,w){return!li(u,w)||u[w]==null?b:u[w]}),o}function N(s){var e=s||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var t=e.allowMissing?fr:null;this.onMissingKey=typeof e.onMissingKey=="function"?e.onMissingKey:t,this.warn=e.warn||ol,this.replaceImplementation=e.replace||hr,this.tokenRegex=hl(e.interpolation),this.pluralRules=e.pluralRules||ui}N.prototype.locale=function(s){return s&&(this.currentLocale=s),this.currentLocale};N.prototype.extend=function(s,e){for(var t=dr(s||{}),r=0;r<t.length;r+=1){var n=t[r][0],i=t[r][1],o=e?e+"."+n:n;typeof i=="object"?this.extend(i,o):this.phrases[o]=i}};N.prototype.unset=function(s,e){if(typeof s=="string")delete this.phrases[s];else for(var t=dr(s||{}),r=0;r<t.length;r+=1){var n=t[r][0],i=t[r][1],o=e?e+"."+n:n;typeof i=="object"?this.unset(i,o):delete this.phrases[o]}};N.prototype.clear=function(){this.phrases={}};N.prototype.replace=function(s){this.clear(),this.extend(s)};N.prototype.t=function(s,e){var t,r,n=e==null?{}:e;if(typeof this.phrases[s]=="string")t=this.phrases[s];else if(typeof n._=="string")t=n._;else if(this.onMissingKey){var i=this.onMissingKey;r=i(s,n,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+s+'"'),r=s;return typeof t=="string"&&(r=fr(t,n,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),r};N.prototype.has=function(s){return li(this.phrases,s)};N.transformPhrase=function(e,t,r){return fr(e,t,r)};hi.exports=N});var J={};Co(J,{Headers:()=>mr,Request:()=>yl,Response:()=>ml,default:()=>yr,fetch:()=>gl});var pl,ve,gl,yr,mr,yl,ml,M=jo(()=>{"use strict";pl=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},ve=pl(),gl=ve.fetch,yr=ve.fetch.bind(ve),mr=ve.Headers,yl=ve.Request,ml=ve.Response});var wr=p(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});var vr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_r.default=vr});var Sr=p(Ne=>{"use strict";var mi=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ne,"__esModule",{value:!0});var _l=mi((M(),$o(J))),wl=mi(wr()),br=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch=="undefined"?this.fetch=_l.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>h(this,null,function*(){var o,a,l;let u=null,c=null,d=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){let A=yield i.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=A:c=JSON.parse(A))}let b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,g="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{let b=yield i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,g="OK")}catch(w){i.status===404&&b===""?(f=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,g="OK"),u&&this.shouldThrowOnError)throw new wl.default(u)}return{error:u,data:c,count:d,status:f,statusText:g}}));return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Ne.default=br});var Er=p(qe=>{"use strict";var bl=qe&&qe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(qe,"__esModule",{value:!0});var Sl=bl(Sr()),xr=class extends Sl.default{select(e){let t=!1,r=(e!=null?e:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let n=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){let i=typeof n=="undefined"?"offset":`${n}.offset`,o=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;let l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};qe.default=xr});var Et=p(Fe=>{"use strict";var xl=Fe&&Fe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fe,"__esModule",{value:!0});var El=xl(Er()),kr=class extends El.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Fe.default=kr});var Tr=p(Be=>{"use strict";var kl=Be&&Be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Be,"__esModule",{value:!0});var Me=kl(Et()),Ar=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){let n=t?"HEAD":"GET",i=!1,o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Me.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){let o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Me.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){let u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Me.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Me.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Me.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Be.default=Ar});var vi=p(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.version=void 0;kt.version="0.0.0-automated"});var _i=p(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.DEFAULT_HEADERS=void 0;var Al=vi();At.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Al.version}`}});var bi=p(ze=>{"use strict";var wi=ze&&ze.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ze,"__esModule",{value:!0});var Tl=wi(Tr()),Ol=wi(Et()),Pl=_i(),Or=class s{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Pl.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){let t=new URL(`${this.url}/${e}`);return new Tl.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:n=!1,count:i}={}){let o,a=new URL(`${this.url}/rpc/${e}`),l;r||n?(o=r?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);let u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Ol.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ze.default=Or});var Oi=p(k=>{"use strict";var _e=k&&k.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(k,"__esModule",{value:!0});k.PostgrestError=k.PostgrestBuilder=k.PostgrestTransformBuilder=k.PostgrestFilterBuilder=k.PostgrestQueryBuilder=k.PostgrestClient=void 0;var Si=_e(bi());k.PostgrestClient=Si.default;var xi=_e(Tr());k.PostgrestQueryBuilder=xi.default;var Ei=_e(Et());k.PostgrestFilterBuilder=Ei.default;var ki=_e(Er());k.PostgrestTransformBuilder=ki.default;var Ai=_e(Sr());k.PostgrestBuilder=Ai.default;var Ti=_e(wr());k.PostgrestError=Ti.default;k.default={PostgrestClient:Si.default,PostgrestQueryBuilder:xi.default,PostgrestFilterBuilder:Ei.default,PostgrestTransformBuilder:ki.default,PostgrestBuilder:Ai.default,PostgrestError:Ti.default}});var Ui=p((Xu,Di)=>{"use strict";Di.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var ue=document.querySelectorAll(".slides img"),G=0,zt=null;function Hr(){ue.length>0&&(ue[G].classList.add("displaySlide"),zt=setInterval(nextSlide,5e3))}function Jr(s){s>=ue.length?G=0:s<0?G=ue.length-1:G=s,ue.forEach(e=>e.classList.remove("displaySlide")),ue[G].classList.add("displaySlide")}window.nextSlide=function(){clearInterval(zt),Jr(G+1)};window.prevSlide=function(){clearInterval(zt),Jr(G-1)};function Vr(){let s=document.querySelector(".nav-toggle"),e=document.querySelector("nav ul");s.addEventListener("click",()=>{e.classList.toggle("active")})}var fi=Bt(di()),mt={es:{home:"Inicio",destinations:"Destinos",experiences:"Experiencias",contact:"Contacto",dark_mode:"Modo Oscuro",light_mode:"Modo Claro",change_language:"Cambiar Idioma",welcome:"Bienvenido a nuestro sitio",description:"Explora nuestras funcionalidades.",eslogan:`Viaja...
Descubre...
y Vive`,visita:"Visita M\xFAltiples Destinos",Paris:"Par\xEDs",Egipto:"Egipto",Turquia:"Turqu\xEDa",Roma:"Roma",Vive:"Vive la Experiencia",Formulario:"Formulario de Contacto",Nombre:"Nombre",Correo:"Correo",Asunto:"Asunto",Mensaje:"Mensaje",Enviar:"Enviar Informaci\xF3n",Sedes:"Nuestras Sedes",Medellin:"Medell\xEDn",Cordoba:"C\xF3rdoba",CampoNombre:"Ingrese su Nombre",CampoCorreo:"Ingrese su Correo",CampoAsunto:"Ingrese su Asunto",CampoMensaje:"Ingrese su Mensaje",CerrarSesion:"Cerrar Sesi\xF3n",Registrarse:"Registrarse",Usuario:"Usuario",Contrase\u00F1a:"Contrase\xF1a",CampoContrase\u00F1a:"Ingrese su contrase\xF1a",CampoUsuario:"Ingrese su usuario",IniciarSesion:"Iniciar Sesi\xF3n",Touristics:"Destinos Tur\xEDsticos",Search:"Buscar destino...",country:"Pa\xEDs",language:"Idioma",Destination:"Destino",currency:"Moneda",Add:"Agregar",Cancel:"Cancelar",AddDest:"Agregar Nuevo Destino"},en:{home:"Home",destinations:"Destinations",experiences:"Experiences",contact:"Contact",dark_mode:"Dark Mode",light_mode:"Light Mode",change_language:"Change Language",welcome:"Welcome to our site",description:"Explore our features.",eslogan:`Travel...
Discover...
& Live`,visita:"Visit Multiple Destinations",Paris:"Paris",Egipto:"Egypt",Turquia:"Turkey",Roma:"Rome",Vive:"Live the Experience",Formulario:"Contact Form",Nombre:"Name",Correo:"Email",Asunto:"Subject",Mensaje:"Message",Enviar:"Send Information",Sedes:"Our Headquarters",Medellin:"Medellin",Cordoba:"Cordoba",CampoNombre:"Enter your Name",CampoCorreo:"Enter your Email",CampoAsunto:"Enter your Subject",CampoMensaje:"Enter your Message",CerrarSesion:"Log out",Registrarse:"Sign up",Usuario:"User",Contrase\u00F1a:"Password",CampoContrase\u00F1a:"Enter your password",CampoUsuario:"Enter your username",IniciarSesion:"Log in",Touristics:"Tourist Destinations",Search:"Search destination...",country:"Country",language:"language",Destination:"Destination",currency:"currency",Add:"Add",Cancel:"Cancel",AddDest:"Add New Destination"}},vt=localStorage.getItem("language")||(navigator.language.startsWith("es")?"es":"en"),pr=new fi.default({phrases:mt[vt],locale:vt});function pi(s){mt[s]&&(vt=s,localStorage.setItem("language",s),_t(s))}function gr(){return vt}function _t(s){mt[s]&&(pr.replace(mt[s]),document.querySelectorAll("[data-i18n]").forEach(e=>{let t=e.getAttribute("data-i18n");e.innerHTML=pr.t(t).replace(/\n/g,"<br>")}),document.querySelectorAll("[data-i18n-placeholder]").forEach(e=>{let t=e.getAttribute("data-i18n-placeholder");e.setAttribute("placeholder",pr.t(t))}))}function gi(){let s=document.getElementById("toggleDarkMode"),e=document.getElementById("darkModeStylesheet");localStorage.getItem("darkMode")==="enabled"&&(document.body.classList.add("dark-mode"),e.removeAttribute("disabled")),s.addEventListener("click",()=>{document.body.classList.toggle("dark-mode")?(e.removeAttribute("disabled"),localStorage.setItem("darkMode","enabled")):(e.setAttribute("disabled",""),localStorage.setItem("darkMode","disabled"))})}var yi=s=>{let e;return s?e=s:typeof fetch=="undefined"?e=(...t)=>Promise.resolve().then(()=>(M(),J)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var De=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},wt=class extends De{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},bt=class extends De{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},St=class extends De{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},xt;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(xt||(xt={}));var vl=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},Ue=class{constructor(e,{headers:t={},customFetch:r,region:n=xt.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=yi(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return vl(this,void 0,void 0,function*(){try{let{headers:n,method:i,body:o}=t,a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob!="undefined"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData!="undefined"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));let c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(_=>{throw new wt(_)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new bt(c);if(!c.ok)throw new St(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield c.json():f==="application/octet-stream"?g=yield c.blob():f==="text/event-stream"?g=c:f==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null}}catch(n){return{data:null,error:n}}})}};var Pi=Bt(Oi(),1),{PostgrestClient:Ii,PostgrestQueryBuilder:ju,PostgrestFilterBuilder:Cu,PostgrestTransformBuilder:$u,PostgrestBuilder:Lu,PostgrestError:Il}=Pi.default;var Ri="2.11.2";var ji={"X-Client-Info":`realtime-js/${Ri}`},Ci="1.0.0",Ot=1e4,$i=1e3,V;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(V||(V={}));var T;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(T||(T={}));var P;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(P||(P={}));var Tt;(function(s){s.websocket="websocket"})(Tt||(Tt={}));var B;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(B||(B={}));var Ge=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let n=t.getUint8(1),i=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+n));o=o+n;let l=r.decode(e.slice(o,o+i));o=o+i;let u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}};var W=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var S;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(S||(S={}));var Ir=(s,e,t={})=>{var r;let n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Rl(o,s,e,n),i),{})},Rl=(s,e,t,r)=>{let n=e.find(a=>a.name===s),i=n==null?void 0:n.type,o=t[s];return i&&!r.includes(i)?Li(i,o):Pr(o)},Li=(s,e)=>{if(s.charAt(0)==="_"){let t=s.slice(1,s.length);return Ll(e,t)}switch(s){case S.bool:return jl(e);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return Cl(e);case S.json:case S.jsonb:return $l(e);case S.timestamp:return Dl(e);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:return Pr(e);default:return Pr(e)}},Pr=s=>s,jl=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Cl=s=>{if(typeof s=="string"){let e=parseFloat(s);if(!Number.isNaN(e))return e}return s},$l=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Ll=(s,e)=>{if(typeof s!="string")return s;let t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i,o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch(a){i=o?o.split(","):[]}return i.map(a=>Li(e,a))}return s},Dl=s=>typeof s=="string"?s.replace(" ","T"):s,Pt=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var K=class{constructor(e,t,r={},n=Ot){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Rr;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Rr||(Rr={}));var we=class s{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=s.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=s.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=s.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){let i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{let d=i[u];if(d){let f=c.map(w=>w.presence_ref),g=d.map(w=>w.presence_ref),_=c.filter(w=>g.indexOf(w.presence_ref)<0),b=d.filter(w=>f.indexOf(w.presence_ref)<0);_.length>0&&(a[u]=_),b.length>0&&(l[u]=b)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,t,r,n){let{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;let c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){let d=e[a].map(g=>g.presence_ref),f=c.filter(g=>d.indexOf(g.presence_ref)<0);e[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;let c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let n=e[r];return"metas"in n?t[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var jr;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(jr||(jr={}));var Cr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Cr||(Cr={}));var $;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})($||($={}));var be=class s{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=T.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new K(this,P.join,this.params,this.timeout),this.rejoinTimer=new W(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=T.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=T.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=T.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=T.errored,this.rejoinTimer.scheduleTimeout())}),this._on(P.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new we(this),this.broadcastEndpointURL=Pt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e($.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e($.CLOSED));let l={},u={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:c}){var f;if(this.socket.setAuth(),c===void 0){e==null||e($.SUBSCRIBED);return}else{let g=this.bindings.postgres_changes,_=(f=g==null?void 0:g.length)!==null&&f!==void 0?f:0,b=[];for(let w=0;w<_;w++){let A=g[w],{filter:{event:U,schema:C,table:R,filter:le}}=A,ce=c&&c[w];if(ce&&ce.event===U&&ce.schema===C&&ce.table===R&&ce.filter===le)b.push(Object.assign(Object.assign({},A),{id:ce.id}));else{this.unsubscribe(),e==null||e($.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e($.SUBSCRIBED);return}})).receive("error",c=>{e==null||e($.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(r){return h(this,arguments,function*(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let c=yield this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return yield(i=c.body)===null||i===void 0?void 0:i.cancel(),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,u;let c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=T.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(P.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let n=new K(this,P.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_fetchWithTimeout(e,t,r){return h(this,null,function*(){let n=new AbortController,i=setTimeout(()=>n.abort(),r),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new K(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;let o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=P;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var _,b,w;return((_=g.filter)===null||_===void 0?void 0:_.event)==="*"||((w=(b=g.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var _,b,w,A,U,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){let R=g.id,le=(_=g.filter)===null||_===void 0?void 0:_.event;return R&&((b=t.ids)===null||b===void 0?void 0:b.includes(R))&&(le==="*"||(le==null?void 0:le.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let R=(U=(A=g==null?void 0:g.filter)===null||A===void 0?void 0:A.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return R==="*"||R===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){let _=f.data,{schema:b,table:w,commit_timestamp:A,type:U,errors:C}=_;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:A,eventType:U,new:{},old:{},errors:C}),this._getPayloadRecords(_))}g.callback(f,r)})}_isClosed(){return this.state===T.closed}_isJoined(){return this.state===T.joined}_isJoining(){return this.state===T.joining}_isLeaving(){return this.state===T.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&s.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(P.close,{},e)}_onError(e){this._on(P.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=T.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ir(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ir(e.columns,e.old_record)),t}};var Nl=()=>{},ql=typeof WebSocket!="undefined",Fl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Se=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=ji,this.params={},this.timeout=Ot,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Nl,this.conn=null,this.sendBuffer=[],this.serializer=new Ge,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch=="undefined"?o=(...a)=>Promise.resolve().then(()=>(M(),J)).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Tt.websocket}`,this.httpEndpoint=Pt(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let n=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new W(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ql){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new $r(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(()=>Bt(Ui())).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ci}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return h(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case V.connecting:return B.Connecting;case V.open:return B.Open;case V.closing:return B.Closing;default:return B.Closed}}isConnected(){return this.connectionState()===B.Open}channel(e,t={config:{}}){let r=new be(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e=null){return h(this,null,function*(){let t=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch(n){}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(P.access_token,{access_token:t})})}})}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close($i,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:n,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){return h(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(P.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([Fl],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}},$r=class{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=V.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}};var xe=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function x(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var It=class extends xe{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Y=class extends xe{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var Ml=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},jt=s=>{let e;return s?e=s:typeof fetch=="undefined"?e=(...t)=>Promise.resolve().then(()=>(M(),J)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ni=()=>Ml(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield Promise.resolve().then(()=>(M(),J))).Response:Response}),Rt=s=>{if(Array.isArray(s))return s.map(t=>Rt(t));if(typeof s=="function"||s!==Object(s))return s;let e={};return Object.entries(s).forEach(([t,r])=>{let n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Rt(r)}),e};var Q=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},Lr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Bl=(s,e,t)=>Q(void 0,void 0,void 0,function*(){let r=yield Ni();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(n=>{e(new It(Lr(n),s.status||500))}).catch(n=>{e(new Y(Lr(n),n))}):e(new Y(Lr(s),s))}),zl=(s,e,t,r)=>{let n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),t))};function He(s,e,t,r,n,i){return Q(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,zl(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Bl(l,a,r))})})}function Ee(s,e,t,r){return Q(this,void 0,void 0,function*(){return He(s,"GET",e,t,r)})}function L(s,e,t,r,n){return Q(this,void 0,void 0,function*(){return He(s,"POST",e,r,n,t)})}function qi(s,e,t,r,n){return Q(this,void 0,void 0,function*(){return He(s,"PUT",e,r,n,t)})}function Fi(s,e,t,r){return Q(this,void 0,void 0,function*(){return He(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Ct(s,e,t,r,n){return Q(this,void 0,void 0,function*(){return He(s,"DELETE",e,r,n,t)})}var O=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},Gl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Je=class{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=jt(n)}uploadOrUpdate(e,t,r,n){return O(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},Mi),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob!="undefined"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));let u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(x(i))return{data:null,error:i};throw i}})}upload(e,t,r){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return O(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l,u=Object.assign({upsert:Mi.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob!="undefined"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(x(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return O(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");let i=yield L(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new xe("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}})}update(e,t,r){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return O(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}})}copy(e,t,r){return O(this,void 0,void 0,function*(){try{return{data:{path:(yield L(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return O(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield L(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return O(this,void 0,void 0,function*(){try{let n=yield L(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}})}download(e,t){return O(this,void 0,void 0,function*(){let n=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Ee(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(x(a))return{data:null,error:a};throw a}})}info(e){return O(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Ee(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Rt(r),error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}})}exists(e){return O(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield Fi(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(x(r)&&r instanceof Y){let n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);let a=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return O(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}})}list(e,t,r){return O(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},Gl),t),{prefix:e||""});return{data:yield L(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer!="undefined"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var Bi="2.7.1";var zi={"X-Client-Info":`storage-js/${Bi}`};var ke=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},Ve=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},zi),t),this.fetch=jt(r)}listBuckets(){return ke(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(x(e))return{data:null,error:e};throw e}})}getBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ke(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ke(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(x(t))return{data:null,error:t};throw t}})}};var We=class extends Ve{constructor(e,t={},r){super(e,t,r)}from(e){return new Je(this.url,this.headers,e,this.fetch)}};var Gi="2.49.1";var Ke="";typeof Deno!="undefined"?Ke="deno":typeof document!="undefined"?Ke="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?Ke="react-native":Ke="node";var Hl={"X-Client-Info":`supabase-js-${Ke}/${Gi}`},Hi={headers:Hl},Ji={schema:"public"},Vi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wi={};M();var Jl=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},Vl=s=>{let e;return s?e=s:typeof fetch=="undefined"?e=yr:e=fetch,(...t)=>e(...t)},Wl=()=>typeof Headers=="undefined"?mr:Headers,Ki=(s,e,t)=>{let r=Vl(t),n=Wl();return(i,o)=>Jl(void 0,void 0,void 0,function*(){var a;let l=(a=yield e())!==null&&a!==void 0?a:s,u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Kl=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})};function Yi(s){return s.replace(/\/$/,"")}function Qi(s,e){let{db:t,auth:r,realtime:n,global:i}=s,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},u),i),accessToken:()=>Kl(this,void 0,void 0,function*(){return""})};return s.accessToken?c.accessToken=s.accessToken:delete c.accessToken,c}var $t="2.68.0";var X=30*1e3,Lt=3,Dt=Lt*X,Xi="http://localhost:9999",Zi="supabase.auth.token";var eo={"X-Client-Info":`gotrue-js/${$t}`};var Ye="X-Supabase-Api-Version",Dr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function to(s){return Math.round(Date.now()/1e3)+s}function ro(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){let e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}var j=()=>typeof window!="undefined"&&typeof document!="undefined",Z={tested:!1,writable:!1},z=()=>{if(!j())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(e){return!1}if(Z.tested)return Z.writable;let s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Z.tested=!0,Z.writable=!0}catch(e){Z.tested=!0,Z.writable=!1}return Z.writable};function so(s){let e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch(r){}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}var Ut=s=>{let e;return s?e=s:typeof fetch=="undefined"?e=(...t)=>Promise.resolve().then(()=>(M(),J)).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},no=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Ur=(s,e,t)=>h(void 0,null,function*(){yield s.setItem(e,JSON.stringify(t))}),Xe=(s,e)=>h(void 0,null,function*(){let t=yield s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(r){return t}}),Ze=(s,e)=>h(void 0,null,function*(){yield s.removeItem(e)});function Yl(s){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="",r,n,i,o,a,l,u,c=0;for(s=s.replace("-","+").replace("_","/");c<s.length;)o=e.indexOf(s.charAt(c++)),a=e.indexOf(s.charAt(c++)),l=e.indexOf(s.charAt(c++)),u=e.indexOf(s.charAt(c++)),r=o<<2|a>>4,n=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&n!=0&&(t=t+String.fromCharCode(n)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}var Qe=class s{constructor(){this.promise=new s.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};Qe.promiseConstructor=Promise;function Nr(s){let e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=t[1];return JSON.parse(Yl(r))}function io(s){return h(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),s)})})}function oo(s,e){return new Promise((r,n)=>{h(this,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield s(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})})}function Ql(s){return("0"+s.toString(16)).substr(-2)}function Xl(){let e=new Uint32Array(56);if(typeof crypto=="undefined"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Ql).join("")}function Zl(s){return h(this,null,function*(){let t=new TextEncoder().encode(s),r=yield crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")})}function ec(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function tc(s){return h(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;let t=yield Zl(s);return ec(t)})}function ee(s,e,t=!1){return h(this,null,function*(){let r=Xl(),n=r;t&&(n+="/PASSWORD_RECOVERY"),yield Ur(s,`${e}-code-verifier`,n);let i=yield tc(r);return[i,r===i?"plain":"s256"]})}var rc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ao(s){let e=s.headers.get(Ye);if(!e||!e.match(rc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch(t){return null}}var et=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function y(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}var Nt=class extends et{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function lo(s){return y(s)&&s.name==="AuthApiError"}var Ae=class extends et{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},q=class extends et{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}},I=class extends q{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function co(s){return y(s)&&s.name==="AuthSessionMissingError"}var Te=class extends q{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},te=class extends q{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},re=class extends q{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function uo(s){return y(s)&&s.name==="AuthImplicitGrantRedirectError"}var tt=class extends q{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Oe=class extends q{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function qt(s){return y(s)&&s.name==="AuthRetryableFetchError"}var rt=class extends q{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var sc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t},se=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),nc=[502,503,504];function ho(s){return h(this,null,function*(){var e;if(!no(s))throw new Oe(se(s),0);if(nc.includes(s.status))throw new Oe(se(s),s.status);let t;try{t=yield s.json()}catch(i){throw new Ae(se(i),i)}let r,n=ao(s);if(n&&n.getTime()>=Dr["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new rt(se(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new I}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new rt(se(t),s.status,t.weak_password.reasons);throw new Nt(se(t),s.status||500,r)})}var ic=(s,e,t,r)=>{let n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};function v(s,e,t,r){return h(this,null,function*(){var n;let i=Object.assign({},r==null?void 0:r.headers);i[Ye]||(i[Ye]=Dr["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield oc(s,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function oc(s,e,t,r,n,i){return h(this,null,function*(){let o=ic(e,r,n,i),a;try{a=yield s(t,Object.assign({},o))}catch(l){throw console.error(l),new Oe(se(l),0)}if(a.ok||(yield ho(a)),r!=null&&r.noResolveJson)return a;try{return yield a.json()}catch(l){yield ho(l)}})}function F(s){var e;let t=null;ac(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=to(s.expires_in)));let r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function qr(s){let e=F(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function D(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function fo(s){return{data:s,error:null}}function po(s){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i}=s,o=sc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function go(s){return s}function ac(s){return s.access_token&&s.refresh_token&&s.expires_in}var lc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t},ne=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Ut(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){return h(this,null,function*(){try{return yield v(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(y(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(e,t={}){try{return yield v(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:D})}catch(n){if(y(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return h(this,null,function*(){try{let{options:t}=e,r=lc(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),yield v(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:po,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(y(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return h(this,null,function*(){try{return yield v(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:D})}catch(t){if(y(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return h(this,null,function*(){var t,r,n,i,o,a,l;try{let u={nextPage:null,lastPage:0,total:0},c=yield v(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:go});if(c.error)throw c.error;let d=yield c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(_=>{let b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(y(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return h(this,null,function*(){try{return yield v(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:D})}catch(t){if(y(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return h(this,null,function*(){try{return yield v(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:D})}catch(r){if(y(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return h(this,null,function*(){try{return yield v(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:D})}catch(r){if(y(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return h(this,null,function*(){try{let{data:t,error:r}=yield v(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(y(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return h(this,null,function*(){try{return{data:yield v(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(y(t))return{data:null,error:t};throw t}})}};var yo={getItem:s=>z()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{z()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{z()&&globalThis.localStorage.removeItem(s)}};function Fr(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function mo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(s){typeof self!="undefined"&&(self.globalThis=self)}}var ie={debug:!!(globalThis&&z()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},st=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Ft=class extends st{};function Mr(s,e,t){return h(this,null,function*(){ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ie.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},n=>h(this,null,function*(){if(n){ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return yield t()}finally{ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw ie.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Ft(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ie.debug)try{let i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}mo();var cc={url:Xi,storageKey:Zi,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eo,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function vo(s,e,t){return h(this,null,function*(){return yield t()})}var oe=class s{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=s.nextInstanceID,s.nextInstanceID+=1,this.instanceID>0&&j()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let n=Object.assign(Object.assign({},cc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ne({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ut(n.fetch),this.lock=n.lock||vo,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:j()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Mr:this.lock=vo,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:z()?this.storage=yo:(this.memoryStorage={},this.storage=Fr(this.memoryStorage)):(this.memoryStorage={},this.storage=Fr(this.memoryStorage)),j()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",i=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$t}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var e;try{let t=so(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":(yield this._isPKCECallback(t))&&(r="pkce"),j()&&this.detectSessionInUrl&&r!=="none"){let{data:n,error:i}=yield this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),uo(i)){let l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return yield this._removeSession(),{error:i}}let{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),yield this._saveSession(o),setTimeout(()=>h(this,null,function*(){a==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",o):yield this._notifyAllSubscribers("SIGNED_IN",o)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return y(t)?{error:t}:{error:new Ae("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var t,r,n;try{let i=yield v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:F}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};let l=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(y(i))return{data:{user:null,session:null},error:i};throw i}})}signUp(e){return h(this,null,function*(){var t,r,n;try{let i;if("email"in e){let{email:c,password:d,options:f}=e,g=null,_=null;this.flowType==="pkce"&&([g,_]=yield ee(this.storage,this.storageKey)),i=yield v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:_},xform:F})}else if("phone"in e){let{phone:c,password:d,options:f}=e;i=yield v(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:F})}else throw new te("You must provide either an email or phone number and a password");let{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};let l=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(y(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){return h(this,null,function*(){try{let t;if("email"in e){let{email:i,password:o,options:a}=e;t=yield v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qr})}else if("phone"in e){let{phone:i,password:o,options:a}=e;t=yield v(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qr})}else throw new te("You must provide either an email or phone number and a password");let{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Te}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){return h(this,null,function*(){var t,r,n,i;return yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){let t=yield Xe(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t!=null?t:"").split("/");try{let{data:i,error:o}=yield v(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:F});if(yield Ze(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Te}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n!=null?n:null}),error:o})}catch(i){if(y(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}})}signInWithIdToken(e){return h(this,null,function*(){try{let{options:t,provider:r,token:n,access_token:i,nonce:o}=e,a=yield v(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:F}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Te}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){return h(this,null,function*(){var t,r,n,i,o;try{if("email"in e){let{email:a,options:l}=e,u=null,c=null;this.flowType==="pkce"&&([u,c]=yield ee(this.storage,this.storageKey));let{error:d}=yield v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){let{phone:a,options:l}=e,{data:u,error:c}=yield v(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new te("You must provide either an email or phone number.")}catch(a){if(y(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){return h(this,null,function*(){var t,r;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:o,error:a}=yield v(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:F});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");let l=o.session,u=o.user;return l!=null&&l.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(y(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithSSO(e){return h(this,null,function*(){var t,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=yield ee(this.storage,this.storageKey)),yield v(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:fo})}catch(i){if(y(i))return{data:null,error:i};throw i}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new I;let{error:n}=yield v(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(y(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:n,options:i}=e,{error:o}=yield v(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){let{phone:r,type:n,options:i}=e,{data:o,error:a}=yield v(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new te("You must provide either an email or phone number and a type")}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(t=>h(this,null,function*(){return t}))}))})}_acquireLock(e,t){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=h(this,null,function*(){return yield r,yield t()});return this.pendingInLock.push(h(this,null,function*(){try{yield n}catch(i){}})),n}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=t();for(this.pendingInLock.push(h(this,null,function*(){try{yield r}catch(n){}})),yield r;this.pendingInLock.length;){let n=[...this.pendingInLock];yield Promise.all(n),this.pendingInLock.splice(0,n.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=yield Xe(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at*1e3-Date.now()<Dt:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}let{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:D}):yield this._useSession(t=>h(this,null,function*(){var r,n,i;let{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new I}:yield v(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:D})}))}catch(t){if(y(t))return co(t)&&(yield this._removeSession(),yield Ze(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}})}updateUser(r){return h(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(r){return h(this,arguments,function*(e,t={}){try{return yield this._useSession(n=>h(this,null,function*(){let{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new I;let a=i.session,l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=yield ee(this.storage,this.storageKey));let{data:c,error:d}=yield v(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:a.access_token,xform:D});if(d)throw d;return a.user=c.user,yield this._saveSession(a),yield this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}}))}catch(n){if(y(n))return{data:{user:null},error:n};throw n}})}_decodeJWT(e){return Nr(e)}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new I;let t=Date.now()/1e3,r=t,n=!0,i=null,o=Nr(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){let{session:a,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{let{data:a,error:l}=yield this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(y(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;if(!e){let{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new I;let{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(y(t))return{data:{user:null,session:null},error:t};throw t}})}_getSessionFromURL(e,t){return h(this,null,function*(){try{if(!j())throw new re("No browser detected.");if(e.error||e.error_description||e.error_code)throw new re(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new tt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new re("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tt("No code detected.");let{data:U,error:C}=yield this._exchangeCodeForSession(e.code);if(C)throw C;let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:U.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new re("No session defined in URL");let c=Math.round(Date.now()/1e3),d=parseInt(a),f=c+d;l&&(f=parseInt(l));let g=f-c;g*1e3<=X&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);let _=f-d;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,f,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,f,c);let{data:b,error:w}=yield this._getUser(i);if(w)throw w;let A={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(y(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){let t=yield Xe(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>h(this,null,function*(){var r;let{data:n,error:i}=t;if(i)return{error:i};let o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){let{error:a}=yield this.admin.signOut(o,e);if(a&&!(lo(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(yield this._removeSession(),yield Ze(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let t=ro(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(t)}))}),{data:{subscription:r}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var r,n;try{let{data:{session:i},error:o}=t;if(o)throw o;yield(r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}}))})}resetPasswordForEmail(r){return h(this,arguments,function*(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=yield ee(this.storage,this.storageKey,!0));try{return yield v(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(y(o))return{data:null,error:o};throw o}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:t,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(y(t))return{data:null,error:t};throw t}})}linkIdentity(e){return h(this,null,function*(){var t;try{let{data:r,error:n}=yield this._useSession(i=>h(this,null,function*(){var o,a,l,u,c;let{data:d,error:f}=i;if(f)throw f;let g=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield v(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})}));if(n)throw n;return j()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(y(r))return{data:{provider:e.provider,url:null},error:r};throw r}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r,n;let{data:i,error:o}=t;if(o)throw o;return yield v(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})}))}catch(t){if(y(t))return{data:null,error:t};throw t}})}_refreshAccessToken(e){return h(this,null,function*(){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let r=Date.now();return yield oo(n=>h(this,null,function*(){return n>0&&(yield io(200*Math.pow(2,n-1))),this._debug(t,"refreshing attempt",n),yield v(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:F})}),(n,i)=>{let o=200*Math.pow(2,n);return i&&qt(i)&&Date.now()+o-r<X})}catch(r){if(this._debug(t,"error",r),y(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return h(this,null,function*(){let r=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),j()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let t="#_recoverAndRefresh()";this._debug(t,"begin");try{let r=yield Xe(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&(yield this._removeSession());return}let n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Dt;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Dt}s`),n){if(this.autoRefreshToken&&r.refresh_token){let{error:i}=yield this._callRefreshToken(r.refresh_token);i&&(console.error(i),qt(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var t,r;if(!e)throw new I;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Qe;let{data:i,error:o}=yield this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new I;yield this._saveSession(i.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);let a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),y(i)){let o={session:null,error:i};return qt(i)||(yield this._removeSession()),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}})}_notifyAllSubscribers(e,t,r=!0){return h(this,null,function*(){let n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let i=[],o=Array.from(this.stateChangeEmitters.values()).map(a=>h(this,null,function*(){try{yield a.callback(e,t)}catch(l){i.push(l)}}));if(yield Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield Ur(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield Ze(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&j()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),X);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(t=>h(this,null,function*(){let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let n=Math.floor((r.expires_at*1e3-e)/X);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${X}ms, refresh threshold is ${Lt} ticks`),n<=Lt&&(yield this._callRefreshToken(r.refresh_token))}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof st)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!j()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,r){return h(this,null,function*(){let n=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[i,o]=yield ee(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){let i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:n,error:i}=t;return i?{data:null,error:i}:yield v(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})}))}catch(t){if(y(t))return{data:null,error:t};throw t}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r,n;let{data:i,error:o}=t;if(o)return{data:null,error:o};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=yield v(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(t){if(y(t))return{data:null,error:t};throw t}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:n,error:i}=t;if(i)return{data:null,error:i};let{data:o,error:a}=yield v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})}))}catch(t){if(y(t))return{data:null,error:t};throw t}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var r;let{data:n,error:i}=t;return i?{data:null,error:i}:yield v(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})}))}catch(t){if(y(t))return{data:null,error:t};throw t}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};let r=(e==null?void 0:e.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var t,r;let{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let o=this._decodeJWT(n.access_token),a=null;o.aal&&(a=o.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");let c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}))})}};oe.nextInstanceID=0;var uc=oe,Br=uc;var Mt=class extends Br{constructor(e){super(e)}};var hc=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(s,e||[])).next())})},nt=class{constructor(e,t,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=Yi(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ji,realtime:Wi,auth:Object.assign(Object.assign({},Vi),{storageKey:l}),global:Hi},c=Qi(r!=null?r:{},u);this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Ki(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Ii(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ue(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new We(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return hc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},u,c){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mt({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Se(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var _o=(s,e,t)=>new nt(s,e,t);var ae=_o("https://pggepqcytcttzxlncwqd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnZ2VwcWN5dGN0dHp4bG5jd3FkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIwNzEwMTMsImV4cCI6MjA1NzY0NzAxM30._XB8EDwNIPzEUW7A8mQt1K-cGUi5yHQWJyyE1BCQtDs");function wo(s){return h(this,null,function*(){let{error:e}=yield ae.from("Destinos").delete().eq("id",s);e?(console.error("Error al eliminar destino:",e),alert("No se pudo eliminar el destino.")):console.log("Destino eliminado correctamente")})}function bo(s){return h(this,null,function*(){let{data:e,error:t}=yield ae.from("Destinos").insert([s]);return t?(console.error("Error al agregar destino:",t),null):e})}function So(){let s=document.getElementById("formulario_login");s&&s.addEventListener("submit",e=>h(this,null,function*(){e.preventDefault();let t=document.getElementById("loginUsername").value,r=document.getElementById("loginPassword").value,{data:n,error:i}=yield ae.auth.signInWithPassword({email:t,password:r});if(i){alert("Credenciales incorrectas");return}alert("Inicio de sesi\xF3n exitoso"),localStorage.setItem("token",n.session.access_token),location.href="index.html"}))}function xo(){let s=document.getElementById("registerForm");s&&s.addEventListener("submit",e=>h(this,null,function*(){e.preventDefault();let t=document.getElementById("registerUsername").value,r=document.getElementById("registerPassword").value,{data:n,error:i}=yield ae.auth.signUp({email:t,password:r});if(i){alert("Error en el registro: "+i.message);return}alert("Registro exitoso."),window.location.href="login.html"}))}function zr(){return h(this,null,function*(){let{data:{user:s}}=yield ae.auth.getUser(),e=document.querySelector(".inicio_sesion"),t=document.querySelector(".destinos");t&&(s?t.innerHTML='<a href="destinos.html" data-i18n="destinations">Destinos</a>':t.innerHTML='<a href="#Destinos" data-i18n="destinations">Destinos</a>'),e&&(s?(e.innerHTML='<a href="index.html" id="logoutBtn" data-i18n="CerrarSesion">Cerrar sesi\xF3n</a>',document.getElementById("logoutBtn").addEventListener("click",r=>h(this,null,function*(){r.preventDefault(),yield ae.auth.signOut(),location.reload()}))):e.innerHTML='<a href="login.html" data-i18n="IniciarSesion">Iniciar Sesi\xF3n</a>')})}function Eo(){return h(this,null,function*(){let s=t=>{let r=document.createElement("div");return r.classList.add("list-group-item","list-group-item-action"),r.style.cursor="pointer",r.innerHTML=`
            <h5 class="mb-1 text-capitalize">${t.Destino}</h5>
            <p class="mb-1 text-capitalize"><strong>Pa\xEDs:</strong> ${t.Pais}</p>
            <p class="mb-1 text-capitalize"><strong>Continente:</strong> ${t.Continente}</p>
            <p class="mb-1 text-capitalize"><strong>Idioma:</strong> ${t.Idioma}</p>
            <p class="mb-1 text-capitalize"><strong>Moneda:</strong> ${t.Moneda}</p>
            <button class="delete-btn" data-id="${t.id}">\u{1F5D1} Eliminar</button>
        `,r.querySelector(".delete-btn").addEventListener("click",()=>h(this,null,function*(){confirm(`\xBFSeguro que quieres eliminar "${t.Destino}"?`)&&(yield wo(t.id),r.remove())})),r},e=localStorage.getItem("token");if(!e){location.href="/login";return}try{let t=yield fetch("https://pggepqcytcttzxlncwqd.supabase.co/rest/v1/Destinos?select=*",{headers:{"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnZ2VwcWN5dGN0dHp4bG5jd3FkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIwNzEwMTMsImV4cCI6MjA1NzY0NzAxM30._XB8EDwNIPzEUW7A8mQt1K-cGUi5yHQWJyyE1BCQtDs",Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Error en la solicitud: ${t.status}`);return(yield t.json()).map(s)}catch(t){return console.error("Error al obtener destinos:",t),alert("Ocurri\xF3 un error al obtener los destinos."),[]}})}function ko(){document.getElementById("searchInput").addEventListener("input",function(){let e=this.value.toLowerCase();document.querySelectorAll(".list-group-item").forEach(r=>{let n=r.querySelector("h5").textContent.toLowerCase();r.style.display=n.includes(e)?"block":"none"})})}function Ao(){return h(this,null,function*(){let s=document.getElementById("destino-form");s&&s.addEventListener("submit",e=>h(this,null,function*(){e.preventDefault();let t={Destino:s.querySelector("#destino").value.trim(),Pais:s.querySelector("#pais").value.trim(),Continente:s.querySelector("#continente").value.trim(),Idioma:s.querySelector("#idioma").value.trim(),Moneda:s.querySelector("#moneda").value.trim()};try{yield bo(t),alert("Destino agregado exitosamente!"),s.reset(),window.location.href="destinos.html"}catch(r){console.error("Error al agregar destino:",r),alert("No se pudo agregar el destino.")}}))})}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".slider")&&Hr(),document.querySelector(".nav-toggle")&&Vr(),document.querySelector("#formulario_login")&&So(),document.querySelector("#registerForm")&&xo(),document.querySelector(".container-destinos")&&(Eo().then(e=>{let t=document.getElementById("destinos-container");e.forEach(r=>t.appendChild(r))}),ko()),document.querySelector("#destino-form")&&Ao(),zr(),gi(),_t(gr());let s=document.querySelector("#toggleLanguage");s&&s.addEventListener("click",()=>{let e=gr()==="es"?"en":"es";pi(e),zr(),_t(e)})});})();
